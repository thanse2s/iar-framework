<div>

  <mat-accordion>
    <mat-expansion-panel *ngFor="let evaluationRecord of evaluationRecord; let i = index" [disabled]="editMode">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Records of the year {{evaluationRecord.year}} for Employee {{evaluationRecord.employee_id}}
        </mat-panel-title>
        <mat-panel-description>
          Total Bonus-Salary of this year: {{findBonusSalaryByIDAndYear(evaluationRecord.employee_id, evaluationRecord.year)}}
        </mat-panel-description>
      </mat-expansion-panel-header>
      <div class="button-panel">
        <button mat-icon-button aria-label="Undo" color="warn" id="undo-button" [disabled]="!editMode">
          <mat-icon>undo</mat-icon>
        </button>
        <button mat-icon-button aria-label="Save" color="primary" id="save-button" [disabled]="!editMode" (click)="this.switchEditMode(i)">
          <mat-icon>save</mat-icon>
        </button>
        <button mat-icon-button aria-label="Edit" color="primary" id="edit-button" (click)="this.switchEditMode(i)" [disabled]="editMode">
          <mat-icon>edit</mat-icon>
        </button>
      </div>

      <table *ngIf = "evaluationRecord.orders_evaluation" class="output_table">
        <tr>
          <th>Name of Product:</th>
          <th>Client:</th>
          <th>Client Ranking:</th>
          <th>Items:</th>
          <th>Bonus:</th>
          <th>Comment:</th>
        </tr>
        <tr *ngFor="let orderevaluation of evaluationRecord.orders_evaluation; let j = index">
          <td>{{orderevaluation.name_of_product}}</td>
          <td>{{orderevaluation.client}}</td>
          <td>{{orderevaluation.client_ranking}}</td>
          <td>{{orderevaluation.items}}</td>
          <td>
            <mat-form-field [formGroup]="findOrderFieldsInBonusForm(i, j)" class="example-full-width" appearance="fill" >
              <mat-label>Bonus</mat-label>
              <input matInput type="number" formControlName="bonus" placeholder="0">
              <span matPrefix>€&nbsp;</span>
            </mat-form-field>
          </td>
          <td>
            <form>
              <mat-form-field [formGroup]="findOrderFieldsInBonusForm(i, j)" class="example-full-width" appearance="fill">
                <mat-label>Leave a comment</mat-label>
                <textarea matInput formControlName="comment" placeholder="Ex. Goodjob!"></textarea>
              </mat-form-field>
            </form>
          </td>
        </tr>
      </table>

      <table id="socialpTable" class="output_table">
        <tr>
          <th>Skill/Competence:</th>
          <th>Target Value:</th>
          <th>Actual Value:</th>
          <th>Bonus:</th>
          <th>Comment:</th>
        </tr>
        <tr *ngFor="let socialperformance of evaluationRecord.social_performance; let j = index">
          <td>{{socialperformance.description}}</td>
          <td>{{socialperformance.target_value}}</td>
          <td>{{socialperformance.actual_value}}</td>
          <td>
            <form>
              <mat-form-field [formGroup]="findSocialFieldsInBonusForm(i, j)" class="example-full-width" appearance="fill">
                <mat-label>Bonus</mat-label>
                <input matInput type="number" formControlName="bonus" placeholder="0">
                <span matPrefix>€&nbsp;</span>
              </mat-form-field>
            </form>
          </td>
          <td>
            <form>
              <mat-form-field [formGroup]="findSocialFieldsInBonusForm(i, j)" class="example-full-width" appearance="fill">
                <mat-label>Leave a comment</mat-label>
                <textarea matInput formControlName="comment" placeholder="Ex. Goodjob!"></textarea>
              </mat-form-field>
            </form>
          </td>
        </tr>
      </table>
    </mat-expansion-panel>
  </mat-accordion>

</div>


